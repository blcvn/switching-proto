syntax = "proto3";

package offchain.v1;

import "offchain/common.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.com/blcvn/switching-proto/go/offchain;offchain";
option java_package = "com.blcvn.switching.offchain";

service GpiService {
  rpc CreatePayment(CreatePaymentRequest) returns (CreatePaymentResponse) {}
  rpc GetPayment(GetPaymentRequest) returns (Payment) {}
  rpc GetPaymentStatus(GetPaymentStatusRequest) returns (PaymentStatus) {}
  rpc ConfirmPayment(ConfirmPaymentRequest) returns (ConfirmPaymentResponse) {}
}

message CreatePaymentRequest {
  string uetr = 1;
  double amount = 2;
  string currency = 3;
  string debtor_agent = 4;
  string creditor_agent = 5;
  string end_to_end_id = 6;
  // Optional: structured account details for the sending bank's account (debtor)
  Account debtor_agent_account = 7;
  // Optional: structured account details for the receiving bank's account (creditor)
  Account creditor_agent_account = 8;
}

message CreatePaymentResponse {
  string id = 1;
  string uetr = 2;
  string transaction_reference = 3;
  string status = 4;
  google.protobuf.Timestamp processing_timestamp = 5;
}

message GetPaymentRequest {
  string id = 1;
}

message GetPaymentStatusRequest {
  string uetr = 1;
}

message PaymentStatus {
  string uetr = 1;
  string status = 2;
  double amount = 3;
  string currency = 4;
}

message ConfirmPaymentRequest {
  string uetr = 1;
  string confirmation_type = 2;
  string timestamp = 3;
}

message ConfirmPaymentResponse {
  string uetr = 1;
  string status = 2;
}
